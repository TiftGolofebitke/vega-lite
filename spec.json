{
 "$schema": "http://json-schema.org/draft-04/schema#",
 "description": "Schema for vegalite specification",
 "type": "object",
 "required": ["marktype","enc","cfg"],
 "properties": {
  "marktype": {
   "type": "string",
   "enum": ["point","tick","bar","line","area","circle","square","text"]
  },
  "enc": {
   "type": "object",
   "properties": {
    "x": {
     "type": "object",
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "aggr": {
       "type": "string",
       "enum": ["avg","sum","min","max","count"],
       "supportedEnums": {
        "Q": ["avg","sum","min","max","count"],
        "O": [],
        "T": ["avg","min","max"],
        "": ["count"]
       },
       "supportedTypes": {"Q": true,"O": true,"T": true,"": true}
      },
      "fn": {
       "type": "string",
       "enum": ["year","month","day","date","hours","minutes","seconds"],
       "supportedTypes": {"T": true}
      },
      "bin": {
       "type": ["boolean","object"],
       "default": false,
       "properties": {"maxbins": {"type": "integer","default": 15,"minimum": 2}},
       "supportedTypes": {"Q": true}
      },
      "scale": {
       "type": "object",
       "properties": {
        "type": {
         "type": "string",
         "enum": ["linear","log","pow","sqrt","quantile"],
         "default": "linear",
         "supportedTypes": {"Q": true}
        },
        "reverse": {
         "type": "boolean",
         "default": false,
         "supportedTypes": {"Q": true,"T": true}
        },
        "zero": {
         "type": "boolean",
         "description": "Include zero",
         "default": true,
         "supportedTypes": {"Q": true,"T": true}
        },
        "nice": {
         "type": "string",
         "enum": ["second","minute","hour","day","week","month","year"],
         "supportedTypes": {"T": true}
        }
       }
      },
      "axis": {
       "type": "object",
       "properties": {
        "grid": {
         "type": "boolean",
         "default": true,
         "description": "A flag indicate if gridlines should be created in addition to ticks."
        },
        "title": {
         "type": "boolean",
         "default": true,
         "description": "A title for the axis."
        },
        "titleOffset": {"type": "integer","description": "A title offset value for the axis."},
        "format": {
         "type": "string",
         "description": "The formatting pattern for axis labels."
        },
        "maxLabelLength": {
         "type": "integer",
         "default": 25,
         "minimum": 0,
         "description": "Truncate labels that are too long."
        }
       }
      },
      "band": {
       "type": "object",
       "properties": {
        "size": {"type": "integer","minimum": 0},
        "padding": {"type": "integer","minimum": 0,"default": 1}
       }
      },
      "sort": {
       "type": "array",
       "default": [],
       "items": {
        "type": "object",
        "supportedTypes": {"O": true},
        "required": ["name","aggr"],
        "name": {"type": "string"},
        "aggr": {"type": "string","enum": ["avg","sum","min","max","count"]},
        "reverse": {"type": "boolean","default": false}
       }
      }
     },
     "supportedRole": {"measure": true,"dimension": true},
     "supportedMarktypes": {
      "point": true,
      "tick": true,
      "bar": true,
      "line": true,
      "area": true,
      "circle": true,
      "square": true
     },
     "required": ["name","type"]
    },
    "y": {
     "type": "object",
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "aggr": {
       "type": "string",
       "enum": ["avg","sum","min","max","count"],
       "supportedEnums": {
        "Q": ["avg","sum","min","max","count"],
        "O": [],
        "T": ["avg","min","max"],
        "": ["count"]
       },
       "supportedTypes": {"Q": true,"O": true,"T": true,"": true}
      },
      "fn": {
       "type": "string",
       "enum": ["year","month","day","date","hours","minutes","seconds"],
       "supportedTypes": {"T": true}
      },
      "bin": {
       "type": ["boolean","object"],
       "default": false,
       "properties": {"maxbins": {"type": "integer","default": 15,"minimum": 2}},
       "supportedTypes": {"Q": true}
      },
      "scale": {
       "type": "object",
       "properties": {
        "type": {
         "type": "string",
         "enum": ["linear","log","pow","sqrt","quantile"],
         "default": "linear",
         "supportedTypes": {"Q": true}
        },
        "reverse": {
         "type": "boolean",
         "default": false,
         "supportedTypes": {"Q": true,"T": true}
        },
        "zero": {
         "type": "boolean",
         "description": "Include zero",
         "default": true,
         "supportedTypes": {"Q": true,"T": true}
        },
        "nice": {
         "type": "string",
         "enum": ["second","minute","hour","day","week","month","year"],
         "supportedTypes": {"T": true}
        }
       }
      },
      "axis": {
       "type": "object",
       "properties": {
        "grid": {
         "type": "boolean",
         "default": true,
         "description": "A flag indicate if gridlines should be created in addition to ticks."
        },
        "title": {
         "type": "boolean",
         "default": true,
         "description": "A title for the axis."
        },
        "titleOffset": {"type": "integer","description": "A title offset value for the axis."},
        "format": {
         "type": "string",
         "description": "The formatting pattern for axis labels."
        },
        "maxLabelLength": {
         "type": "integer",
         "default": 25,
         "minimum": 0,
         "description": "Truncate labels that are too long."
        }
       }
      },
      "band": {
       "type": "object",
       "properties": {
        "size": {"type": "integer","minimum": 0},
        "padding": {"type": "integer","minimum": 0,"default": 1}
       }
      },
      "sort": {
       "type": "array",
       "default": [],
       "items": {
        "type": "object",
        "supportedTypes": {"O": true},
        "required": ["name","aggr"],
        "name": {"type": "string"},
        "aggr": {"type": "string","enum": ["avg","sum","min","max","count"]},
        "reverse": {"type": "boolean","default": false}
       }
      }
     },
     "supportedRole": {"measure": true,"dimension": true},
     "supportedMarktypes": {
      "point": true,
      "tick": true,
      "bar": true,
      "line": true,
      "area": true,
      "circle": true,
      "square": true
     },
     "required": ["name","type"]
    },
    "row": {
     "type": "object",
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "fn": {
       "type": "string",
       "enum": ["year","month","day","date","hours","minutes","seconds"],
       "supportedTypes": {"T": true}
      },
      "bin": {
       "type": ["boolean","object"],
       "default": false,
       "properties": {"maxbins": {"type": "integer","default": 15,"minimum": 2}},
       "supportedTypes": {"Q": true}
      },
      "aggr": {"type": "string","enum": ["count"],"supportedTypes": {"O": true}},
      "padding": {"type": "number","minimum": 0,"maximum": 1,"default": 0.1},
      "sort": {
       "type": "array",
       "default": [],
       "items": {
        "type": "object",
        "supportedTypes": {"O": true},
        "required": ["name","aggr"],
        "name": {"type": "string"},
        "aggr": {"type": "string","enum": ["avg","sum","min","max","count"]},
        "reverse": {"type": "boolean","default": false}
       }
      },
      "axis": {
       "type": "object",
       "properties": {
        "grid": {
         "type": "boolean",
         "default": true,
         "description": "A flag indicate if gridlines should be created in addition to ticks."
        },
        "title": {
         "type": "boolean",
         "default": true,
         "description": "A title for the axis."
        },
        "titleOffset": {"type": "integer","description": "A title offset value for the axis."},
        "format": {
         "type": "string",
         "description": "The formatting pattern for axis labels."
        },
        "maxLabelLength": {
         "type": "integer",
         "default": 25,
         "minimum": 0,
         "description": "Truncate labels that are too long."
        }
       }
      },
      "height": {"type": "number","minimum": 0,"default": 150},
      "grid": {
       "type": "boolean",
       "default": true,
       "description": "A flag indicate if gridlines should be created in addition to ticks."
      }
     },
     "supportedRole": {"dimension": true},
     "required": ["name","type"],
     "supportedMarktypes": {
      "point": true,
      "tick": true,
      "bar": true,
      "line": true,
      "area": true,
      "circle": true,
      "square": true,
      "text": true
     }
    },
    "col": {
     "type": "object",
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "fn": {
       "type": "string",
       "enum": ["year","month","day","date","hours","minutes","seconds"],
       "supportedTypes": {"T": true}
      },
      "bin": {
       "type": ["boolean","object"],
       "default": false,
       "properties": {"maxbins": {"type": "integer","default": 15,"minimum": 2}},
       "supportedTypes": {"Q": true}
      },
      "aggr": {"type": "string","enum": ["count"],"supportedTypes": {"O": true}},
      "padding": {"type": "number","minimum": 0,"maximum": 1,"default": 0.1},
      "sort": {
       "type": "array",
       "default": [],
       "items": {
        "type": "object",
        "supportedTypes": {"O": true},
        "required": ["name","aggr"],
        "name": {"type": "string"},
        "aggr": {"type": "string","enum": ["avg","sum","min","max","count"]},
        "reverse": {"type": "boolean","default": false}
       }
      },
      "axis": {
       "type": "object",
       "properties": {
        "grid": {
         "type": "boolean",
         "default": true,
         "description": "A flag indicate if gridlines should be created in addition to ticks."
        },
        "title": {
         "type": "boolean",
         "default": true,
         "description": "A title for the axis."
        },
        "titleOffset": {"type": "integer","description": "A title offset value for the axis."},
        "format": {
         "type": "string",
         "description": "The formatting pattern for axis labels."
        },
        "maxLabelLength": {
         "type": "integer",
         "default": 12,
         "minimum": 0,
         "description": "Truncate labels that are too long."
        }
       }
      },
      "width": {"type": "number","minimum": 0,"default": 150}
     },
     "supportedRole": {"dimension": true},
     "required": ["name","type"],
     "supportedMarktypes": {
      "point": true,
      "tick": true,
      "bar": true,
      "line": true,
      "area": true,
      "circle": true,
      "square": true,
      "text": true
     }
    },
    "size": {
     "type": "object",
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "aggr": {
       "type": "string",
       "enum": ["avg","sum","min","max","count"],
       "supportedEnums": {
        "Q": ["avg","sum","min","max","count"],
        "O": [],
        "T": ["avg","min","max"],
        "": ["count"]
       },
       "supportedTypes": {"Q": true,"O": true,"T": true,"": true}
      },
      "fn": {
       "type": "string",
       "enum": ["year","month","day","date","hours","minutes","seconds"],
       "supportedTypes": {"T": true}
      },
      "bin": {
       "type": ["boolean","object"],
       "default": false,
       "properties": {"maxbins": {"type": "integer","default": 15,"minimum": 2}},
       "supportedTypes": {"Q": true}
      },
      "scale": {
       "type": "object",
       "properties": {
        "type": {
         "type": "string",
         "enum": ["linear","log","pow","sqrt","quantile"],
         "default": "linear",
         "supportedTypes": {"Q": true}
        },
        "reverse": {
         "type": "boolean",
         "default": false,
         "supportedTypes": {"Q": true,"T": true}
        },
        "zero": {
         "type": "boolean",
         "description": "Include zero",
         "default": true,
         "supportedTypes": {"Q": true,"T": true}
        },
        "nice": {
         "type": "string",
         "enum": ["second","minute","hour","day","week","month","year"],
         "supportedTypes": {"T": true}
        }
       }
      },
      "legend": {"type": "boolean","default": true},
      "value": {"type": "integer","default": 30,"minimum": 0},
      "sort": {
       "type": "array",
       "default": [],
       "items": {
        "type": "object",
        "supportedTypes": {"O": true},
        "required": ["name","aggr"],
        "name": {"type": "string"},
        "aggr": {"type": "string","enum": ["avg","sum","min","max","count"]},
        "reverse": {"type": "boolean","default": false}
       }
      }
     },
     "supportedRole": {"measure": true,"dimension": "ordinal-only"},
     "supportedMarktypes": {"point": true,"bar": true,"circle": true,"square": true,"text": true}
    },
    "color": {
     "type": "object",
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "aggr": {
       "type": "string",
       "enum": ["avg","sum","min","max","count"],
       "supportedEnums": {
        "Q": ["avg","sum","min","max","count"],
        "O": [],
        "T": ["avg","min","max"],
        "": ["count"]
       },
       "supportedTypes": {"Q": true,"O": true,"T": true,"": true}
      },
      "fn": {
       "type": "string",
       "enum": ["year","month","day","date","hours","minutes","seconds"],
       "supportedTypes": {"T": true}
      },
      "bin": {
       "type": ["boolean","object"],
       "default": false,
       "properties": {"maxbins": {"type": "integer","default": 15,"minimum": 2}},
       "supportedTypes": {"Q": true}
      },
      "scale": {
       "type": "object",
       "properties": {
        "type": {
         "type": "string",
         "enum": ["linear","log","pow","sqrt","quantile"],
         "default": "linear",
         "supportedTypes": {"Q": true}
        },
        "reverse": {
         "type": "boolean",
         "default": false,
         "supportedTypes": {"Q": true,"T": true}
        },
        "zero": {
         "type": "boolean",
         "description": "Include zero",
         "default": true,
         "supportedTypes": {"Q": true,"T": true}
        },
        "nice": {
         "type": "string",
         "enum": ["second","minute","hour","day","week","month","year"],
         "supportedTypes": {"T": true}
        },
        "range": {"type": ["string","array"]}
       }
      },
      "legend": {"type": "boolean","default": true},
      "value": {"type": "string","role": "color","default": "steelblue"},
      "sort": {
       "type": "array",
       "default": [],
       "items": {
        "type": "object",
        "supportedTypes": {"O": true},
        "required": ["name","aggr"],
        "name": {"type": "string"},
        "aggr": {"type": "string","enum": ["avg","sum","min","max","count"]},
        "reverse": {"type": "boolean","default": false}
       }
      }
     },
     "supportedRole": {"measure": true,"dimension": true},
     "supportedMarktypes": {
      "point": true,
      "tick": true,
      "bar": true,
      "line": true,
      "area": true,
      "circle": true,
      "square": true,
      "text": true
     }
    },
    "alpha": {
     "type": "object",
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "aggr": {
       "type": "string",
       "enum": ["avg","sum","min","max","count"],
       "supportedEnums": {
        "Q": ["avg","sum","min","max","count"],
        "O": [],
        "T": ["avg","min","max"],
        "": ["count"]
       },
       "supportedTypes": {"Q": true,"O": true,"T": true,"": true}
      },
      "fn": {
       "type": "string",
       "enum": ["year","month","day","date","hours","minutes","seconds"],
       "supportedTypes": {"T": true}
      },
      "bin": {
       "type": ["boolean","object"],
       "default": false,
       "properties": {"maxbins": {"type": "integer","default": 15,"minimum": 2}},
       "supportedTypes": {"Q": true}
      },
      "scale": {
       "type": "object",
       "properties": {
        "type": {
         "type": "string",
         "enum": ["linear","log","pow","sqrt","quantile"],
         "default": "linear",
         "supportedTypes": {"Q": true}
        },
        "reverse": {
         "type": "boolean",
         "default": false,
         "supportedTypes": {"Q": true,"T": true}
        },
        "zero": {
         "type": "boolean",
         "description": "Include zero",
         "default": true,
         "supportedTypes": {"Q": true,"T": true}
        },
        "nice": {
         "type": "string",
         "enum": ["second","minute","hour","day","week","month","year"],
         "supportedTypes": {"T": true}
        }
       }
      },
      "value": {"type": "number","minimum": 0,"maximum": 1},
      "sort": {
       "type": "array",
       "default": [],
       "items": {
        "type": "object",
        "supportedTypes": {"O": true},
        "required": ["name","aggr"],
        "name": {"type": "string"},
        "aggr": {"type": "string","enum": ["avg","sum","min","max","count"]},
        "reverse": {"type": "boolean","default": false}
       }
      }
     },
     "supportedRole": {"measure": true,"dimension": "ordinal-only"},
     "supportedMarktypes": {
      "point": true,
      "tick": true,
      "bar": true,
      "line": true,
      "area": true,
      "circle": true,
      "square": true,
      "text": true
     }
    },
    "shape": {
     "type": "object",
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "fn": {
       "type": "string",
       "enum": ["year","month","day","date","hours","minutes","seconds"],
       "supportedTypes": {"T": true}
      },
      "bin": {
       "type": ["boolean","object"],
       "default": false,
       "properties": {"maxbins": {"type": "integer","default": 15,"minimum": 2}},
       "supportedTypes": {"Q": true}
      },
      "aggr": {"type": "string","enum": ["count"],"supportedTypes": {"O": true}},
      "legend": {"type": "boolean","default": true},
      "value": {
       "type": "string",
       "enum": ["circle","square","cross","diamond","triangle-up","triangle-down"],
       "default": "circle"
      },
      "sort": {
       "type": "array",
       "default": [],
       "items": {
        "type": "object",
        "supportedTypes": {"O": true},
        "required": ["name","aggr"],
        "name": {"type": "string"},
        "aggr": {"type": "string","enum": ["avg","sum","min","max","count"]},
        "reverse": {"type": "boolean","default": false}
       }
      }
     },
     "supportedRole": {"dimension": true},
     "supportedMarktypes": {"point": true,"circle": true,"square": true}
    },
    "text": {
     "type": "object",
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "aggr": {
       "type": "string",
       "enum": ["avg","sum","min","max","count"],
       "supportedEnums": {
        "Q": ["avg","sum","min","max","count"],
        "O": [],
        "T": ["avg","min","max"],
        "": ["count"]
       },
       "supportedTypes": {"Q": true,"O": true,"T": true,"": true}
      },
      "fn": {
       "type": "string",
       "enum": ["year","month","day","date","hours","minutes","seconds"],
       "supportedTypes": {"T": true}
      },
      "bin": {
       "type": ["boolean","object"],
       "default": false,
       "properties": {"maxbins": {"type": "integer","default": 15,"minimum": 2}},
       "supportedTypes": {"Q": true}
      },
      "scale": {
       "type": "object",
       "properties": {
        "type": {
         "type": "string",
         "enum": ["linear","log","pow","sqrt","quantile"],
         "default": "linear",
         "supportedTypes": {"Q": true}
        },
        "reverse": {
         "type": "boolean",
         "default": false,
         "supportedTypes": {"Q": true,"T": true}
        },
        "zero": {
         "type": "boolean",
         "description": "Include zero",
         "default": true,
         "supportedTypes": {"Q": true,"T": true}
        },
        "nice": {
         "type": "string",
         "enum": ["second","minute","hour","day","week","month","year"],
         "supportedTypes": {"T": true}
        }
       }
      },
      "text": {
       "type": "object",
       "properties": {
        "align": {"type": "string","default": "left"},
        "baseline": {"type": "string","default": "middle"},
        "margin": {"type": "integer","default": 4,"minimum": 0}
       }
      },
      "font": {
       "type": "object",
       "properties": {
        "weight": {"type": "string","enum": ["normal","bold"],"default": "normal"},
        "size": {"type": "integer","default": 10,"minimum": 0},
        "family": {"type": "string","default": "Helvetica Neue"},
        "style": {"type": "string","default": "normal","enum": ["normal","italic"]}
       }
      },
      "sort": {
       "type": "array",
       "default": [],
       "items": {
        "type": "object",
        "supportedTypes": {"O": true},
        "required": ["name","aggr"],
        "name": {"type": "string"},
        "aggr": {"type": "string","enum": ["avg","sum","min","max","count"]},
        "reverse": {"type": "boolean","default": false}
       }
      }
     },
     "supportedRole": {"measure": true},
     "supportedMarktypes": {"text": true}
    },
    "detail": {
     "type": "object",
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "fn": {
       "type": "string",
       "enum": ["year","month","day","date","hours","minutes","seconds"],
       "supportedTypes": {"T": true}
      },
      "bin": {
       "type": ["boolean","object"],
       "default": false,
       "properties": {"maxbins": {"type": "integer","default": 15,"minimum": 2}},
       "supportedTypes": {"Q": true}
      },
      "aggr": {"type": "string","enum": ["count"],"supportedTypes": {"O": true}},
      "sort": {
       "type": "array",
       "default": [],
       "items": {
        "type": "object",
        "supportedTypes": {"O": true},
        "required": ["name","aggr"],
        "name": {"type": "string"},
        "aggr": {"type": "string","enum": ["avg","sum","min","max","count"]},
        "reverse": {"type": "boolean","default": false}
       }
      }
     },
     "supportedRole": {"dimension": true},
     "supportedMarktypes": {"point": true,"tick": true,"line": true,"circle": true,"square": true}
    }
   }
  },
  "filter": {
   "type": "array",
   "items": {
    "type": "object",
    "properties": {
     "operands": {"type": "array","items": {"type": ["string","boolean","integer","number"]}},
     "operator": {"type": "string","enum": [">",">=","=","!=","<","<=","notNull"]}
    }
   }
  },
  "cfg": {
   "type": "object",
   "properties": {
    "width": {"type": "integer"},
    "height": {"type": "integer"},
    "viewport": {"type": "array","items": {"type": "integer"}},
    "gridColor": {"type": "string","role": "color","default": "#eeeeee"},
    "filterNull": {
     "type": "object",
     "properties": {
      "O": {"type": "boolean","default": false},
      "Q": {"type": "boolean","default": true},
      "T": {"type": "boolean","default": true}
     }
    },
    "toggleSort": {"type": "string","default": "O"},
    "singleHeight": {"type": "integer","default": 200,"minimum": 0},
    "singleWidth": {"type": "integer","default": 200,"minimum": 0},
    "largeBandSize": {"type": "integer","default": 21,"minimum": 0},
    "smallBandSize": {"type": "integer","default": 12,"minimum": 0},
    "largeBandMaxCardinality": {"type": "integer","default": 10},
    "cellPadding": {"type": "number","default": 0.1},
    "cellGridColor": {"type": "string","role": "color","default": "#aaaaaa"},
    "cellBackgroundColor": {"type": "string","role": "color","default": "transparent"},
    "textCellWidth": {"type": "integer","default": 90,"minimum": 0},
    "strokeWidth": {"type": "integer","default": 2,"minimum": 0},
    "timeScaleLabelLength": {"type": "integer","default": 3,"minimum": 0},
    "characterWidth": {"type": "integer","default": 6},
    "dataFormatType": {"type": "string","enum": ["json","csv"],"default": "json"},
    "useVegaServer": {"type": "boolean","default": false},
    "dataUrl": {"type": "string"},
    "vegaServerTable": {"type": "string"},
    "vegaServerUrl": {"type": "string","default": "http://localhost:3001"}
   }
  }
 }
}
